<body id=b style=margin:0>
<script>
d = document;

N=256;g=(e,f)=>{for(i=0;i<N;i++){j=0;h=i;for(k=N;k>>=1;h>>=1)j=j<<1|h&1;j>i&&(e[j]=[e[i],e[i]=e[j]][0],f[j]=[f[i],f[i]=f[j]][0])}for(hN=1;2*hN<=N;hN*=2)for(i=0;i<N;i+=2*hN)for(j=i;j<i+hN;j++)pi=3.14*(j-i)/hN,cos=Math.cos(pi),sin=Math.sin(pi),tre=e[j+hN]*cos+f[j+hN]*sin,tim=-e[j+hN]*sin+f[j+hN]*cos,e[j+hN]=e[j]-tre,f[j+hN]=f[j]-tim,e[j]+=tre,f[j]+=tim};fft2d=(e,f)=>{d=c.getImageData(0,0,N,N).data;re=[];im=[];fft=[];for(I=max=0;I<N;I++){re[I]=[];im[I]=[];for(J=0;J<N;J++)re[I][J]=d[4*(I*N+J)],im[I][J]=0;g(re[I],im[I])}re2=[];im2=[];for(I=0;I<N/2;I++){re2[I]=re2[N-I]=[];im2[I]=im2[N-I]=[];for(J=0;J<N;J++)re2[I][J]=re[J][I],im2[I][J]=im[J][I];g(re2[I],im2[I]);fft[I]=fft[N-I]=[];for(J=0;J<N;J++)fft[I][J]=Math.hypot(re2[I][J],im2[I][J]),max=Math.max(max,fft[I][J])}logmax=Math.log(max);d2=new ImageData(N,N);for(I=0;I<N/2;I++)for(J=0;J<N/2;J++)t1=4*(I*N+J),t2=4*(I*N+N-J-1),t3=4*((N-I-1)*N+J),t4=4*((N-I-1)*N+N-J-1),fft[N/2-I]&&(d2.data[t1]=d2.data[t1+1]=d2.data[t1+2]=d2.data[t2]=d2.data[t2+1]=d2.data[t2+2]=d2.data[t3]=d2.data[t3+1]=d2.data[t3+2]=d2.data[t4]=d2.data[t4+1]=d2.data[t4+2]=fft[N/2-I][N/2-J]/logmax),d2.data[t1+3]=d2.data[t2+3]=d2.data[t3+3]=d2.data[t4+3]=N;c.putImageData(d2,266,0)};b.style.padding="1em";d.write`<table><td width=262>Draw here<td>FFT</table><canvas id=a width=522 height=256></canvas><p>round<input type=radio name=rs id=rs checked> square <input type=radio name=rs><p>size <input type=range size=1 min=1 max=20 value=10 id=w><p><button onclick=a.width^=0;c.fillStyle='#000';c.fillRect(0,0,256,256);fft2d()>clear`;c=a.getContext`2d`;c.fillRect(0,0,256,256);c.fillStyle="#fff";c.fillRect(118,118,20,20);fft2d();x=y=0;a.onmousedown=(e,f)=>{c.lineWidth=+w.value;c.lineCap=rs.checked?"round":"square";c.strokeStyle="#fff";c.beginPath();c.moveTo(x=e.pageX-14,y=e.pageY-36);c.lineTo(x+1,y);c.stroke();fft2d()};a.onmousemove=(e,f)=>{x&&(c.moveTo(x,y),c.lineTo(x=e.pageX-14,y=e.pageY-36),c.stroke(),fft2d())};a.onmouseup=(e,f)=>{x=y=0}

</script>