<table border><tr><td>Original image<br><canvas id="canvas0" style=width:25vw></canvas><td><input type="button" id="transform-btn" value="=>"><td>Fourier image<br><canvas id="canvas1" style=width:25vw></canvas><td><input type="button" id="reconstruct-btn" value="=>"><td>Reconstructed image<br><canvas id="canvas2" style=width:25vw><script>var u=function(){function q(b,a,c,g,d,e){if(1===d)b[a]=new h(c[g],0);else for(q(b,a,c,g,d/2,2*e),q(b,a+d/2,c,g+e,d/2,2*e),c=0;c<d/2;c++)g=l(-2*Math.PI*c/d),e=b[a+c],b[a+c]=e.h(g.c(b[a+c+d/2])),b[a+c+d/2]=e.g(g.c(b[a+c+d/2]))}function r(b,a,c,g,d,e){if(1===d)b[a]=c[g];else for(r(b,a,c,g,d/2,2*e),r(b,a+d/2,c,g+e,d/2,2*e),c=0;c<d/2;c++)g=l(2*Math.PI*c/d),e=b[a+c],b[a+c]=e.h(g.c(b[a+c+d/2])),b[a+c+d/2]=e.g(g.c(b[a+c+d/2]))}function p(b,a){for(var c=[],g=a[1],d=a[0],e=0,k=g/2;e<g;e++){for(var f=0;f<d/2;f++){var h=k*a[0]+f;c.push(b[h])}k+=k>=g/2?-g/2:g/2+1}e=0;for(k=g/2;e<g;e++){for(f=d/2;f<d;f++)h=k*a[0]+f,c.push(b[h]);k+=k>=g/2?-g/2:g/2+1}return c}function f(b,a){for(var c=[],g=a[1],d=a[0],e=0;e<g;e++)for(var f=0;f<d;f++)c.push(b[(f<d/2?e:g-1-e)*a[0]+f]);return c}function l(b){return new h(Math.cos(b),Math.sin(b))}function h(b,a){this.a=b;this.b=a}h.prototype.m=function(){return this.a*this.a+this.b*this.b};h.prototype.f=function(){return Math.sqrt(this.m())};h.prototype.h=function(b){return new h(this.a+b.a,this.b+b.b)};h.prototype.g=function(b){return new h(this.a-b.a,this.b-b.b)};h.prototype.c=function(b){return"object"===typeof b?new h(this.a*b.a-this.b*b.b,this.a*b.b+this.b*b.a):new h(b*this.a,b*this.b)};return{i:h,transform:function(b,a){q(a,0,b,0,b.length,1)},l:function(b,a){r(a,0,b,0,b.length,1);for(var c=0;c<a.length;c++)a[c]=a[c].a/a.length},shift:function(b,a){return f(p(p(b,a),a),a)},unshift:function(b,a){return p(p(f(b,a),a),a)},filter:function(b,a,c,g){var d=Math.pow(c,2),e=Math.pow(g,2),f=a[1];a=a[0];for(var h=0;h<f;h++)for(var m=0;m<a;m++){var t=h*a+m,n=Math.pow(h-a/2,2)+Math.pow(m-f/2,2);if(n>d&&isNaN(g)||n<e&&isNaN(c)||n<d&&!isNaN(c)&&!isNaN(g)||n>e&&!isNaN(c)&&!isNaN(g))b[t]=new u.i(0,0)}}}}();window.addEventListener("load",function(){function q(a){var d=new Image;d.addEventListener("load",function(){f[0]=d.width;f[1]=d.height;for(var a=0;3>a;a++)l[a]=document.getElementById(("#canvas"+a).substring(1)),l[a].width=f[0],l[a].height=f[1],h[a]=l[a].getContext("2d");h[0].drawImage(d,0,0,d.width,d.height);var c=h[0].getImageData(0,0,f[0],f[1]),g=[];for(a=0;a<c.data.length;a+=4)g.push(c.data[a]);b=function(a,b){return 0===arguments.length?g:g[a*f[0]+b]}});d.src=a}function r(){var c=[];u.transform(b(),c);c=u.shift(c,f);for(var d=0,e=0;e<c.length;e++){var k=c[e].f();k>d&&(d=k)}a=function(a,b){return 0===arguments.length?c:c[a*f[0]+b]};e=h[1].getImageData(0,0,f[0],f[1]);d=Math.log(.009*d+1);for(k=0;k<f[1];k++)for(var l=0;l<f[0];l++){var m=4*(f[0]*k+l);e.data[m+3]=255;var t=Math.log(.009*a(l,k).f()+1);t=Math.round(t/d*255);for(var n=0;3>n;n++)e.data[m+n]=t}h[1].putImageData(e,0,0)}function p(){var b=[],d=a();d=u.unshift(d,f);u.l(d,b);c=function(a,c){if(0===arguments.length)var d=b;else d=Math.pow(10,2),d=Math.round(d*b[a*f[0]+c])/d;return d};d=h[2].getImageData(0,0,f[0],f[1]);for(var e=0;e<f[1];e++)for(var k=0;k<f[0];k++){var l=4*(f[0]*e+k);d.data[l+3]=255;for(var m=0;3>m;m++)d.data[l+m]=c(e,k)}h[2].putImageData(d,0,0)}var f=[-1,-1],l,h,b,a,c;return{j:function(){q("circle.png");document.getElementById("transform-btn").addEventListener("click",function(){r()});document.getElementById("reconstruct-btn").addEventListener("click",function(){p()});l=[];h=[];b=a=c=function(){return!1}}}}().j)</script>